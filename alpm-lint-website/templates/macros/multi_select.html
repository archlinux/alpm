{#
  dropdown dropdown macro for filter components.
  
  Parameters:
  - filter_type: The filter data attribute
  - label: The display label
  - options: Array of options to choose from
  - has_none_option: Whether to include a "No X" option (default: false)
  - none_label: Label for the none option
#}

{% macro multi_select(filter_type, label, options, has_none_option=false, none_label="") %}
<div>
  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
    {{ label }}
  </label>
  <div class="dropdown relative w-full" data-filter="{{ filter_type }}">
    <button type="button" class="dropdown-toggle flex items-center justify-between w-full px-3 py-2 text-sm border border-gray-300 rounded-md cursor-pointer transition-all duration-200 bg-white hover:border-gray-400 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:border-gray-500">
      <span class="selected-text">All {{ label }}</span>
      <svg class="chevron w-4 h-4 text-gray-500 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
      </svg>
    </button>
    <div class="checkbox-container hidden absolute top-full left-0 right-0 z-10 mt-1 border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto bg-white dark:bg-gray-700 dark:border-gray-600">
      {% for option in options %}
      <label class="flex items-center px-3 py-2 text-sm cursor-pointer transition-colors duration-200 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600">
        <input type="checkbox" value="{{ option }}" data-label="{{ option }}" class="mr-2 cursor-pointer">
        <span>{{ option }}</span>
      </label>
      {% endfor %}
      {% if has_none_option %}
      {% set final_none_label = none_label | default(value="No " ~ label) %}
      <label class="flex items-center px-3 py-2 text-sm cursor-pointer transition-colors duration-200 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600">
        <input type="checkbox" value="none" data-label="{{ final_none_label }}" class="mr-2 cursor-pointer">
        <span>{{ final_none_label }}</span>
      </label>
      {% endif %}
    </div>
  </div>
</div>
{% endmacro %}
